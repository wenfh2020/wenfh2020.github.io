---
layout: post
title:  "redis æŒä¹…åŒ–æ–¹å¼ - aof å’Œ rdb åŒºåˆ«"
categories: redis
tags: redis aof rdb åŒºåˆ« difference
author: wenfh2020
---

aof å’Œ rdb æ˜¯ redis æŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼ã€‚æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬çš„ç‰¹ç‚¹å’Œå…·ä½“åº”ç”¨åœºæ™¯åŒºåˆ«ã€‚



* content
{:toc}

---

## 1. æŒä¹…åŒ–ç‰¹ç‚¹

### 1.1. aof

* aof æ˜¯å†™å‘½ä»¤è¿½åŠ åˆ°æŒä¹…åŒ–æ–‡ä»¶çš„æ–¹å¼ã€‚
* aof æ”¯æŒå‡ ç§æŒä¹…åŒ–ç­–ç•¥ï¼Œå…¶ä¸­æ¯ç§’æ•°æ®å¢é‡å­˜ç›˜ä¸€æ¬¡æ•ˆç‡æ¯”è¾ƒé«˜ã€‚
* aof æ”¯æŒ rdb æ··åˆå‹å­˜å‚¨ï¼ˆéœ€è¦é‡å†™å¤„ç†ï¼‰ã€‚
* aof ä¸€å®šç¨‹åº¦ä¸Šè®°å½•äº† redis çš„å†™æ“ä½œæµæ°´ï¼Œä¸€æ®µæ—¶é—´å†…æ–‡ä»¶å†—ä½™æ•°æ®æ¯”è¾ƒå¤§éœ€è¦é‡å†™è§£å†³é—®é¢˜ã€‚

---

### 1.2. rdb

* rdb å¿«ç…§ï¼Œä¸€ä¸ªæ—¶é—´ç‚¹çš„ redis å†…å­˜æ•°æ®å…¨ç›˜è½åœ°ï¼ˆå¿«ç…§ï¼‰ã€‚
* rdb æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ•°æ®å‹ç¼©æ–‡ä»¶ï¼Œæ•°æ®è½åœ°é€Ÿåº¦å¿«ï¼ˆç›¸å¯¹ï¼‰ï¼Œä½“ç§¯å°ã€‚
* å› ä¸º redis å†…å­˜æ˜¯å…¨éƒ¨æ•°æ®è½åœ°ï¼Œæ“ä½œé¢‘ç‡ä¸èƒ½å¤ªé«˜ï¼Œé€šè¿‡é…ç½®æŒä¹…åŒ–é¢‘ç‡ï¼Œå‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ä¸ç­‰ã€‚

---

## 2. ä½¿ç”¨åœºæ™¯åŒºåˆ«

æ ¹æ® aof å’Œ rdb æŒä¹…åŒ–ç‰¹ç‚¹ï¼Œæˆ‘ä»¬çœ‹çœ‹åº”ç”¨åœºæ™¯ä¸»è¦åŒºåˆ«ï¼š

* æ•°æ®æ¢å¤
  
  redis æœåŠ¡å¼‚å¸¸ï¼Œaof æ¯” rdb æ›´æœ‰åˆ©äºæ•°æ®æ¢å¤ã€‚aof é»˜è®¤æ¯ç§’å°†æ•°æ®å¢é‡è¿½åŠ åˆ°æ–‡ä»¶æœ«å­˜ç›˜ä¸€æ¬¡ï¼Œrdb æ˜¯ä¸€ä¸ªæ—¶é—´ç‚¹çš„æ•°æ®å¿«ç…§ï¼Œæ—¶é—´è·¨åº¦æ¯”è¾ƒå¤§ã€‚

* æ•°æ®å¤‡ä»½
  
  rdb æ˜¯ redis å†…å­˜æ•°æ®å¿«ç…§ï¼Œé€Ÿåº¦å¿«ï¼Œä½“ç§¯å°ã€‚æ›´é€‚åˆäºæ•°æ®å¤‡ä»½å­˜å‚¨ã€‚

* redis æœåŠ¡å¯åŠ¨é€Ÿåº¦
  
  redis å¯åŠ¨åŠ è½½ rdb æ–‡ä»¶ æ¯” aof å¿«ã€‚ å› ä¸º aof æ–‡ä»¶æœ‰å†—ä½™å‘½ä»¤ï¼Œrdb æ˜¯æ•°æ®é›†åˆã€‚

* æŒä¹…åŒ–é€Ÿåº¦
  
  aof é»˜è®¤æ¯ç§’å­˜ç›˜å’Œ rdb æŒä¹…åŒ–éƒ½æ˜¯å¼‚æ­¥å­˜å‚¨ï¼ŒåŸºæœ¬ä¸å½±å“ä¸»çº¿ç¨‹ä¸»é€»è¾‘åŠŸèƒ½ã€‚å¦‚æœ aof é‡‡ç”¨å†™å‘½ä»¤å®æ—¶å­˜ç›˜ï¼Œå°†ä¼šä¸¥é‡å½±å“ redis æœåŠ¡æ€§èƒ½ã€‚

* é›†ç¾¤èŠ‚ç‚¹é—´å…¨é‡åŒæ­¥
  
  é›†ç¾¤èŠ‚ç‚¹é—´æ•°æ®å…¨é‡åŒæ­¥ï¼Œéœ€è¦æ‹·è´æœåŠ¡è¿›ç¨‹çš„å†…å­˜æ•°æ®ï¼Œæ ¹æ® rdb æŒä¹…åŒ–ç‰¹ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œä½“ç§¯å°ï¼Œæ˜¾ç„¶ rdb æ›´é€‚åˆäºé›†ç¾¤é—´æ•°æ®ä¼ è¾“ã€‚
  
---

## 3. æŒä¹…åŒ–è¯¦ç»†æ–‡æ¡£

redis æŒä¹…åŒ– aof å’Œ rdb åŒºåˆ«ï¼Œè¯¦ç»†æ–‡æ¡£å¯ä»¥å‚è€ƒ redis ä½œè€…çš„æ–‡ç«  [Redis Persistence](https://redis.io/topics/persistence#how-durable-is-the-append-only-file) 

> é“¾æ¥å¯èƒ½è¢«å¢™ï¼Œç”¨å›½å†…æœç´¢å¼•æ“æœç´¢ä¸‹

è¦äº†è§£æ›´å¤šçš„ç»†èŠ‚ï¼Œå¯ä»¥æŸ¥çœ‹ redis æºç å®ç°ã€‚redis æŒä¹…åŒ–æºç ç†è§£ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¸–å­ï¼š

* [[redis æºç èµ°è¯»] aof æŒä¹…åŒ– (ä¸Š)](https://wenfh2020.com/2020/03/29/redis-aof-prev/)

* [[redis æºç èµ°è¯»] aof æŒä¹…åŒ– (ä¸‹)](https://wenfh2020.com/2020/03/29/redis-aof-next/)

* [[redis æºç èµ°è¯»] rdb æŒä¹…åŒ– - æ–‡ä»¶ç»“æ„](https://wenfh2020.com/2020/03/19/redis-rdb-struct/)

* [[redis æºç èµ°è¯»] rdb æŒä¹…åŒ– - åº”ç”¨åœºæ™¯](https://wenfh2020.com/2020/03/19/redis-rdb-application/)

---

> ğŸ”¥æ–‡ç« æ¥æºï¼š[wenfh2020.com](https://wenfh2020.com/)
