---
layout: post
title:  "å‰–æåµŒå¥—å¼æ­»é”é—®é¢˜"
categories: æŠ€æœ¯
tags: æ­»é” åµŒå¥—
author: wenfh2020
---

å¤šçº¿ç¨‹æ¨¡å‹ä¸­ï¼Œé”æ˜¯ä¸€ä¸ªå¤æ‚çš„ä¸œè¥¿ï¼Œå³ä¾¿æ˜¯ç»éªŒä¸°å¯Œçš„è€å¸æœºä¹Ÿä¸å…ä¼šæœ‰ç¿»è½¦çš„æ—¶å€™ã€‚å¯è§ `nginx` å’Œ `redis` ä¸ºä»€ä¹ˆä¸»é€»è¾‘éƒ½åœ¨å•è¿›ç¨‹å•çº¿ç¨‹é‡Œå®ç°ï¼ˆæˆ‘çŸ¥é“ redis æœ‰å¤šçº¿ç¨‹ï¼Œä½†æ˜¯ä¸»é€»è¾‘è¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹é‡Œå®ç°çš„ï¼‰ã€‚å•çº¿ç¨‹æœ€å¤§çš„å¥½å¤„æ˜¯é¿å¼€äº†é”å¸¦æ¥çš„å¤æ‚åº¦ã€‚é”å¾ˆå¤šæ—¶å€™éƒ½æ˜¯é…å¯¹å‡ºç°çš„ï¼Œé”ä¸Šäº†ï¼Œå°±è¦è§£é”ï¼Œå¿˜è®°è§£é”ä¼šäº§ç”Ÿæ­»é”ã€‚ä¸€èˆ¬è¿™ç§ä½çº§é”™è¯¯æœ‰ç»éªŒçš„ç¨‹åºå‘˜å¾ˆå®¹æ˜“é¿å…ã€‚ç„¶è€Œåœ¨å¤æ‚çš„ä¸šåŠ¡ä½“ç³»ä¸­ï¼Œå¤šäººå…±åŒå¼€å‘ï¼Œå¾€å¾€ä¼šäº§ç”ŸåµŒå¥—å¼æ­»é”é—®é¢˜ï¼Œè€Œè¿™ä¸ªé—®é¢˜è—å¾—å¾ˆæ·±ã€‚



* content
{:toc}

---

## 1. åµŒå¥—æ­»é”ç†è§£

åµŒå¥—å¼æ­»é”ï¼šç³»ç»Ÿä¸­å­˜åœ¨å¤šä¸ªé”ï¼Œé€šè¿‡å‡½æ•°ç›¸äº’è°ƒç”¨ã€‚ä¼ªä»£ç ï¼Œå±•ç¤ºä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œï¼Œææœ‰å¯èƒ½äº§ç”ŸåµŒå¥—æ­»é”é—®é¢˜ã€‚

![å¤šçº¿ç¨‹é€»è¾‘æ—¶åº](/images/2020-03-11-13-25-42.png){: data-action="zoom"}

```c
void func1() {
    lock1();
    ...
    func22();
    ...
    unlock1();
}

void func12() {
    lock1();
    ...
    unlock1();
}

void func2() {
    lock2();
    ...
    func12();
    ...
    unlock2();
}

void func22() {
    lock2();
    ...
    unlock2();
}

void thread1() {
    func1();
}

void thread2() {
    func2();
}
```

---

## 2. æ€»ç»“

* åœ¨ä¸€ä¸ªåŠŸèƒ½å•å…ƒé‡Œï¼Œå°½é‡ä¸è¦è°ƒç”¨æœ‰å…¶å®ƒé”çš„å‡½æ•°ã€‚
* é”çš„ç²’åº¦å°½é‡å°ï¼Œé”æ˜¯é”æ•°æ®çš„ï¼Œä¸æ˜¯é”é€»è¾‘çš„ã€‚åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œå‡½æ•°å…¥å£åŠ é”ï¼Œå‡½æ•°é€€å‡ºè§£é”ï¼Œè¿™ç§æ“ä½œçœ‹ä¼¼æ–¹ä¾¿ï¼Œå…¶å®éšè—äº†å¾ˆå¤šé—®é¢˜ã€‚å‡å¦‚åœ¨è§£é”å‰æ­£åœ¨æ‰§è¡Œä¸€ä¸ªæ’å…¥æ•°æ®åº“è¯­å¥çš„é€»è¾‘ï¼Œåˆšå¥½è¿™ä¸ªæ•°æ®åº“å µäº†ã€‚é‚£æ•´ä¸ªå¤šçº¿ç¨‹ç³»ç»Ÿæœ‰å¯èƒ½å¡åœ¨è¿™é‡Œã€‚

---

> ğŸ”¥æ–‡ç« æ¥æºï¼š[wenfh2020.com](https://wenfh2020.com/)
