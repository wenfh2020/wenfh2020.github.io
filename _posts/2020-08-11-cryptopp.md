---
layout: post
title:  "cryptopp åŠ å¯†åº“ä½¿ç”¨"
categories: c/c++
tags: cryptopp
author: wenfh2020
---

`cryptopp` æ˜¯å…è´¹çš„ c++ åŠ è§£å¯†åº“ï¼ŒåŒ…å«äº†å¤§éƒ¨åˆ†ä¸»æµçš„åŠ è§£å¯†å®ç°åŠŸèƒ½ã€‚è¯¦ç»†å¯ä»¥æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://www.cryptopp.com/)ã€‚æœ¬ç« ä¸»è¦æ˜¯å†™ demoï¼Œæµ‹è¯• `cryptopp` çš„ä½¿ç”¨ã€‚



* content
{:toc}

---

## 1. å®‰è£…

* MacOS

```shell
brew install cryptopp
```

* Linux

```shell
yum install cryptopp
```

---

## 2. demo

* [github æµ‹è¯•ä»£ç ](https://github.com/wenfh2020/c_test/blob/master/normal/test_cryptopp.cpp)

```c++
#include <cryptopp/gzip.h>
#include <iostream>

#if defined(CRYPTOPP_NO_GLOBAL_BYTE)
using CryptoPP::byte;
#endif

bool gzip(const std::string& src, std::string& dst) {
    try {
        CryptoPP::Gzip zip;
        zip.Put((byte*)src.c_str(), src.size());
        zip.MessageEnd();

        CryptoPP::word64 avail = zip.MaxRetrievable();
        if (avail) {
            dst.resize(avail);
            zip.Get((byte*)&dst[0], dst.size());
        }
    } catch (CryptoPP::InvalidDataFormat& e) {
        std::cout << e.GetWhat() << std::endl;
        return false;
    }
    return true;
}

bool ungzip(const std::string& src, std::string& dst) {
    try {
        CryptoPP::Gunzip zip;
        zip.Put((byte*)src.c_str(), src.size());
        zip.MessageEnd();
        CryptoPP::word64 avail = zip.MaxRetrievable();
        if (avail) {
            dst.resize(avail);
            zip.Get((byte*)&dst[0], dst.size());
        }
    } catch (CryptoPP::InvalidDataFormat& e) {
        std::cout << e.GetWhat() << std::endl;
        return false;
    }
    return (true);
}

int main(int argc, char** argv) {
    // gzip
    std::string src("hello world!"), dst;
    if (gzip(src, dst)) {
        std::cout << "gzip: " << dst << std::endl;
    } else {
        std::cout << "gzip failed!" << std::endl;
    }

    // ungizp
    if (ungzip(dst, src)) {
        std::cout << "ungzip: " << src << std::endl;
    } else {
        std::cout << "ungzip failed!" << std::endl;
    }

    return 0;
}
```

* demo è¿è¡Œç»“æœã€‚

```shell
# g++ -std='c++11' test_cryptopp.cpp -lcryptopp -o encry && ./encry
gzip: ï¿½Hï¿½ï¿½ï¿½W(ï¿½/ï¿½IQmÂ´

ungzip: hello world!
```

---

## 3. å‚è€ƒ

* [cryptopp å®˜ç½‘](https://www.cryptopp.com/)

---

> ğŸ”¥ æ–‡ç« æ¥æºï¼š[ã€Šcryptopp åŠ å¯†åº“ä½¿ç”¨ã€‹](https://wenfh2020.com/2020/08/11/cryptopp/)
>
> ğŸ‘ å¤§å®¶è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰äº›ä½œç”¨ï¼ å¦‚æœæƒ³ <font color=green>èµèµ</font>ï¼Œå¯ä»¥ç”¨å¾®ä¿¡æ‰«æä¸‹é¢çš„äºŒç»´ç ï¼Œæ„Ÿè°¢!
<div align=center><img src="/images/2020-08-06-15-49-47.png" width="120"/></div>
