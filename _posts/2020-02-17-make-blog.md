---
layout: post
title:  "github + jekyll 建自己的博客"
categories: 随笔
tags: 随笔
author: wenfh2020
--- 

自从用 `markdown` 写文档之后，感觉就离不开它了。工作这么久，最后悔的事情是没有条理化地将知识实时落地，然后后面做了大量重复无用的工作。很幸运 `github` 提供了一个很好的源码管理和博客平台。我自己的[[博客]](https://wenfh2020.github.io/)[[框架]](https://github.com/wenfh2020/wenfh2020.github.io)来自[Gaohaoyang](https://github.com/Gaohaoyang/gaohaoyang.github.io)



* content
{:toc}

---

## 概述

自己的博客 = `git` + `github` + `jekyll` + `vscode`

---

## 目的

我自己建立博客主要目的是希望对知识进行条理化管理。有几点要求：

1. 终端简洁，无广告，无推荐，最好是完全自己的东西。
2. 支持 `markdown` 文本格式，而且能展示 `markdown` 目录。
3. 支持文章分类管理，即便是二级目录也不错。
4. 支持文章题目搜索。

---

## 搭建流程

`github` 上可以建立自己的博客，也是这几天才知道。搭建起来不复杂，懂的人搭建自然很快。`jekyll` + `github` 搭建详细文档，网络上很多，可以参考下[这个](ttps://github.com/wonderseen/wonderseen.github.io)，细节问题，还是需要花点时间，简单记录下流程：

1. 会 `git` 的基本使用方法。
2. 注册个 `github` 账号。
3. 在 `github` 上建立自己的博客项目 `xxx.github.io`。
4. 拷贝别人的 `xxx.github.io` 文件放在自己的目录下。
5. 别人的 `xxx.github.io` 项目有别人的信息，需要替换删减成自己的。
6. 本地查看博客预览。（请参考这个[文档](https://github.com/wonderseen/wonderseen.github.io)的搭建流程）
7. 本地预览正常，`git` 提交 `github`。
8. 浏览器打开链接 `xxx.github.io`。（有时候不是实时刷新的，大概需要等 1 分钟左右）

---

## markdown 编辑

`markdown` 编辑器可以用 `vscode`，这货真是万能，有不少插件支持。`PicGo` 插件可以关联图床，用起来挺方便的。天下没有免费的午餐，图床肯定是付费的比较稳定流畅，目前暂时选择了免费的 `github` 平台。国内的速度不是很稳定，浏览器有图片缓存，自己看一般不是大问题，而且本地也可以预览，凑合着看吧。

---

## 优化

### 页面代码块显示

原来框架的代码块代码自动换行，字体太大，还有屏蔽了滚动条。在手机上看，感觉挺别扭的，修改文件 `_sass/_syntax-highlighting.scss` 相关选项设置即可。

```scss
pre {
    margin: 12px 0;
    padding: 8px 12px;
    overflow-x: auto;      // 滚动条显示
    word-wrap: break-word;      /* IE 5.5-7 */
    // white-space: pre-wrap;      /* current browsers */
    white-space: none;     // 代码自动换行  /* current browsers */
    > code {
        margin: 0;
        padding: 0;
        font-size: 12px;   // 代码块字体大小
        color: #d1d1c9;
        border: none;
        background-color: #272822;
        line-height: 1em;
    }
}
```

---

## 搜索文章题目功能

原框架没有搜索功能，这个组件[Simple-Jekyll-Search](https://github.com/christian-fei/Simple-Jekyll-Search)可以支持。组件的 `example` 比较简单，能实现功能，凑合着用吧。如果 npm 安装比较麻烦，可以拷贝组件上的一些文件，使得编译通过。

---

### 脚本

* refresh.sh

  发现本地预览有时候不能实时刷新，需要删除目录 `_site` 才能正常工作。
  
```shell
#!/bin/sh
  
cd `dirname $0`
work_path=`pwd`
cd $work_path

rm -r _site
jekyll s --incremental
```

* commit.sh

  写博客文章，经常操作的只有 `_posts` 目录，所以将 git 的 `add`，`commit`，`push` 三个命令，整合在一起方便操作。

```shell
#!/bin/sh
# wenfh2020/2020-02-18/./commit.sh msg1 msg2

cd `dirname $0`
work_path=`pwd`
cd $work_path

if [ $# -lt 1 ]; then
    echo 'pls input commit message'
    exit 1
fi

git pull && git add _posts && git commit -m "$(echo "$@")" && git push -u origin master
```

---

## 参考

* [jekyll 官网](http://jekyllcn.com/)
