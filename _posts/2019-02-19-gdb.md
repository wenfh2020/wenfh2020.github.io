---
layout: post
title:  "Gdb ä½¿ç”¨"
categories: tool
tags: gdb
author: wenfh2020
---

Gdb å¸¸ç”¨å‘½ä»¤æ–¹æ³•ã€‚



* content
{:toc}

---

## 1. gdb

### 1.1. åŸºç¡€å‘½ä»¤

[GDB ä»è£¸å¥”åˆ°ç©¿æˆ´æ•´é½](http://www.skywind.me/blog/archives/2036)
![å‘½ä»¤](/images/2020-02-20-19-40-56.png){: data-action="zoom"}

è¯¦ç»†æ–‡æ¡£é€šè¿‡å‘½ä»¤æŸ¥çœ‹

```shell
man gdb
```

| å‘½ä»¤                | æ“ä½œ                                                                         |
| ------------------- | ---------------------------------------------------------------------------- |
| r                   | è¿è¡Œè°ƒè¯•                                                                     |
| n                   | ä¸‹ä¸€æ­¥                                                                       |
| c                   | ç»§ç»­è¿è¡Œ                                                                     |
| ctrl + c            | ä¸­æ–­ä¿¡å·                                                                     |
| c/continue          | ä¸­æ–­åç»§ç»­è¿è¡Œ                                                               |
| s                   | è¿›å…¥ä¸€ä¸ªå‡½æ•°                                                                 |
| finish              | é€€å‡ºå‡½æ•°                                                                     |
| l                   | åˆ—å‡ºä»£ç è¡Œ                                                                   |
| b                   | æ–­ç‚¹<br/>æ˜¾ç¤ºæ–­ç‚¹åˆ—è¡¨ info b<br/>åˆ é™¤æ–­ç‚¹ delete <number><br/>æ¸…é™¤æ–­ç‚¹ clear |
| n                   | ä¸‹ä¸€æ­¥                                                                       |
| until               | è·³è‡³è¡Œå·<br/>until number                                                    |
| p                   | æ‰“å°<br/>æ‰“å°æ•°ç»„ä¿¡æ¯ p *array@len<br />p/x æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡           |
| bt/backtrace        | å †æ ˆbt <-n><br/>-nè¡¨ä¸€ä¸ªè´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºåªæ‰“å°æ ˆåº•ä¸‹nå±‚çš„æ ˆä¿¡æ¯ã€‚                |
| f/frame             | è¿›å…¥æŒ‡å®šå †æ ˆå±‚<br/> f number                                                 |
| thread apply all bt | æ˜¾ç¤ºçº¿ç¨‹æ‰€æœ‰å †æ ˆ                                                             |
| attach              | ç»‘å®šè¿›ç¨‹è°ƒè¯•<br/>attach -p pid                                               |
| detach              | å–æ¶ˆç»‘å®šè°ƒè¯•è¿›ç¨‹                                                             |
| disassemble         | çœ‹äºŒè¿›åˆ¶æ•°æ®<br/>disassemble func                                            |
| x                   | æŸ¥çœ‹å†…å­˜                                                                     |
| focus               | æ˜¾ç¤ºæºç ç•Œé¢                                                                 |
| display             | æ˜¾ç¤ºå˜é‡                                                                     |
| info registers      | æŸ¥çœ‹å¯„å­˜å™¨                                                                   |
| info win            | çª—å£åˆ‡æ¢<br/>fs cmd<br/>fs src                                               |

---

### 1.2. å†…å­˜å‘½ä»¤

å¯ä»¥ç”¨ `examine` å‘½ä»¤(ç®€å†™ `x` ) æ¥æŸ¥çœ‹å†…å­˜åœ°å€ä¸­çš„å€¼ï¼Œ`x` å‘½ä»¤è¯­æ³•ï¼š

```shell
x/<n/f/u> <addr>
```

n/f/uä¸‰ä¸ªå‚æ•°å¯ä»¥ä¸€èµ·ä½¿ç”¨

| å‘½ä»¤ | æè¿°                                                                                                                                   |
| :--- | :------------------------------------------------------------------------------------------------------------------------------------- |
| n    | æ­£æ•´æ•°ï¼Œå†…å­˜çš„é•¿åº¦                                                                                                                     |
| f    | è¡¨ç¤ºæ˜¾ç¤ºçš„æ ¼å¼ï¼Œå¦‚æœåœ°å€æ‰€æŒ‡çš„æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ ¼å¼å¯ä»¥æ˜¯ `s`ï¼Œåœ°å€æ˜¯æŒ‡ä»¤åœ°å€ï¼Œæ ¼å¼æ˜¯ `i`                                                 |
| u    | ä»å½“å‰åœ°å€å¾€åè¯·æ±‚çš„å­—èŠ‚æ•°ï¼ŒGDBé»˜è®¤æ˜¯4ä¸ªbytesã€‚u å‚æ•°å¯ä»¥ç”¨ä¸‹é¢çš„å­—ç¬¦æ¥ä»£æ›¿ï¼Œ**bè¡¨ç¤ºå•å­—èŠ‚ï¼Œhè¡¨ç¤ºåŒå­—èŠ‚ï¼Œwè¡¨ç¤ºå››å­— èŠ‚ï¼Œgè¡¨ç¤ºå…«å­—èŠ‚**ã€‚ |

æ ¼å¼

| å‘½ä»¤ | æ“ä½œ                         |
| :--- | :--------------------------- |
| x    | æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡       |
| d    | æŒ‰åè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡         |
| u    | æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºæ— ç¬¦å·æ•´å‹ |
| o    | æŒ‰å…«è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡         |
| t    | æŒ‰äºŒè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡         |
| a    | æŒ‰åå…­è¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå˜é‡       |
| c    | æŒ‰å­—ç¬¦æ ¼å¼æ˜¾ç¤ºå˜é‡           |
| f    | æŒ‰æµ®ç‚¹æ•°æ ¼å¼æ˜¾ç¤ºå˜é‡         |

---

### 1.3. tui

```shell
info win
```

gdb å¯è§†åŒ–ï¼Œ`layout` ç”¨äºçª—å£æ“ä½œ

```shell
(gdb) help layout
Change the layout of windows.
Usage: layout prev | next | LAYOUT-NAME
Layout names are:
   src   : Displays source and command windows.
   asm   : Displays disassembly and command windows.
   split : Displays source, disassembly and command windows.
   regs  : Displays register window. If existing layout
           is source/command or assembly/command, the
           register window is displayed. If the
           source/assembly/command (split) is displayed,
           the register window is displayed with
           the window that has current logical focus.
```

* æŸ¥çœ‹å…·ä½“çª—å£

| å‘½ä»¤         | æ“ä½œ                        |
| :----------- | :-------------------------- |
| layout src   | æ˜¾ç¤ºæºä»£ç çª—å£              |
| layout asm   | æ˜¾ç¤ºæ±‡ç¼–çª—å£                |
| layout regs  | æ˜¾ç¤ºæºä»£ç /æ±‡ç¼–å’Œå¯„å­˜å™¨çª—å£ |
| layout split | æ˜¾ç¤ºæºä»£ç å’Œæ±‡ç¼–çª—å£        |
| layout next  | æ˜¾ç¤ºä¸‹ä¸€ä¸ªlayout            |
| layout prev  | æ˜¾ç¤ºä¸Šä¸€ä¸ªlayout            |

---

## 2. å‚è€ƒ

* [gdb è°ƒè¯•å·¥å…· --- ä½¿ç”¨æ–¹æ³•æµ…æ](https://blog.csdn.net/men_wen/article/details/75220102)
* [Linuxä¸­gdb æŸ¥çœ‹coreå †æ ˆä¿¡æ¯](https://blog.csdn.net/suxinpingtao51/article/details/12072559)
* [gdbè°ƒè¯•çš„layoutä½¿ç”¨](https://blog.csdn.net/zhangjs0322/article/details/10152279)

---

> ğŸ”¥ æ–‡ç« æ¥æºï¼š[wenfh2020.com](https://wenfh2020.com/)
>
> ğŸ‘ å¤§å®¶è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰äº›ä½œç”¨ï¼ å¦‚æœæƒ³ <font color=green>èµèµ</font>ï¼Œå¯ä»¥ç”¨å¾®ä¿¡æ‰«æä¸‹é¢çš„äºŒç»´ç ï¼Œæ„Ÿè°¢!
<div align=center><img src="/images/2020-08-06-15-49-47.png" width="120"/></div>
