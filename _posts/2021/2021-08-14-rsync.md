---
layout: post
title:  "rsync 同步文件"
categories: tool
tags: rsync
author: wenfh2020
---

rsync 比 scp 传输文件要好一些，因为它是差异化传输，没有改变的不传，可以说是跨平台工作的神兵利器。




* content
{:toc}

---

rsync 使用方法就不介绍了，常用简单的就一个命令，参考下面命令。

> 我的机器已经做了[免密码传输](https://wenfh2020.com/2020/01/07/ssh-quick-login/)，所以脚本不需要写账号密码~

```shell
#!/bin/sh
# copy src from mac to linux.
SRC=~/go/src/agent
LAN_DST=root@192.168.0.200:/home/gopath/src
REMOTE_DST=root@wenfh2020_sgx.com:/home/gopath/src
DST=$LAN_DST

work_path=$(dirname $0)
cd $work_path

[ $1x == 'remote'x ] && DST=$REMOTE_DST

echo "send files to: $DST"

# --exclude 忽略对应文件。
rsync -avz --exclude="*.o" \
    --exclude=".git" \
    --exclude=".vscode" \
    --exclude="*.so" \
    --exclude="*.a" \
    --exclude="*.log" \
    --exclude="config.yml" \
    --exclude="sync_code.sh" \
    --exclude="main" \
    --exclude="client" \
    $SRC $DST
```
