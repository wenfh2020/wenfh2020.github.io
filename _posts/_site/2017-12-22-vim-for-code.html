<p>记录 Centos7 系统下，用 vim 编写 C++/golang 源码的方法和工具使用总结。</p>

<ul id="markdown-toc">
  <li><a href="#1-环境" id="markdown-toc-1-环境">1. 环境</a></li>
  <li><a href="#2-工具使用" id="markdown-toc-2-工具使用">2. 工具使用</a>    <ul>
      <li><a href="#21-tmux" id="markdown-toc-21-tmux">2.1. tmux</a></li>
      <li><a href="#22-zsh" id="markdown-toc-22-zsh">2.2. zsh</a></li>
      <li><a href="#23-vimplus" id="markdown-toc-23-vimplus">2.3. vimplus</a></li>
    </ul>
  </li>
  <li><a href="#3-ycm-youcompleteme" id="markdown-toc-3-ycm-youcompleteme">3. ycm (YouCompleteMe)</a>    <ul>
      <li><a href="#31-c" id="markdown-toc-31-c">3.1. c++</a></li>
      <li><a href="#32-golang" id="markdown-toc-32-golang">3.2. golang</a></li>
    </ul>
  </li>
</ul>

<hr />

<p><img src="/images/2020-04-22-13-31-34.png" alt="效果图" data-action="zoom" /></p>

<h2 id="1-环境">1. 环境</h2>

<p>Centos 7.4</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cat /proc/version</span>
Linux version 3.10.0-693.2.2.el7.x86_64 <span class="o">(</span>builder@kbuilder.dev.centos.org<span class="o">)</span> <span class="o">(</span>gcc version 4.8.5 20150623 <span class="o">(</span>Red Hat 4.8.5-16<span class="o">)</span> <span class="o">(</span>GCC<span class="o">)</span> <span class="o">)</span>

<span class="c"># go version</span>
go version go1.9.2 linux/amd64
</code></pre></div></div>

<h2 id="2-工具使用">2. 工具使用</h2>

<h3 id="21-tmux">2.1. tmux</h3>

<p>分屏利器，这货确实好用。曾经用 xshell 每个窗口开一个 tab ，现在赶脚很笨很笨。（讲真，两个显示器一起工作，也是爽得不要不要的）</p>

<hr />

<h3 id="22-zsh">2.2. zsh</h3>

<p>比较人性化的终端比 bash shell 好用，个人喜欢它的主题 ZSH_THEME=”mh”，安装包的 141 个主题，每个主题都试了一遍，感觉还是这个简洁实用 –强迫症。</p>

<hr />

<h3 id="23-vimplus">2.3. vimplus</h3>

<p>一键安装 vim 各种插件，感谢作者的贡献，节约的是时间，多出来的却是生命！个人喜欢 <code class="highlighter-rouge">colorscheme torte</code> 或者 <code class="highlighter-rouge">morning</code> 主题，后面可以微调 .vimrc，调整自己适合的使用方案。</p>

<hr />

<h2 id="3-ycm-youcompleteme">3. ycm (YouCompleteMe)</h2>

<p>代码编辑自动补全神器。系统版本低的朋友，建议不要装，例如 Centos 6.5； python, vim, gcc, glibc, 等等各种升级，折腾得让你怀疑人生，墙裂建议各位不要轻易升级 glibc，说多也是泪。直接上 Centos7.4，系统自带版本 vim7.4 还是有点低，升级到 8.0 就能正常支持 ycm 了，注意：vim8.0 编译需要支持 python。</p>

<hr />

<p>场景：单窗口，单文件，打开 vim 。</p>

<p>内存： 100M 左右，一般使用过程中，不可能只打开一个的，所以你懂的。</p>

<p>CPU：代码量少的文件，编辑很流畅，不怎么耗 CPU，笔者编辑 2000 行代码的文件，在补全括号的过程中，有时会发现卡顿，单核 CPU 短暂的跑满。也就2-3s。所以硬件配置不高的朋友，要注意这个问题。</p>

<p>总结：多数场景下，文件比较小，基本不影响使用，编辑大文件需要注意。</p>

<hr />

<h3 id="31-c">3.1. c++</h3>

<p>ycm 对于复杂的 C++ 项目，无法跳转问题。错误：Can’t jump to definition</p>

<p>默认的  .ycm_extra_conf.py 只包含了基本的系统目录。ycm 并没有想象中那么智能，它不知道你开发的复杂的项目代码文件的依赖关系，你需要告诉它。就像 Makefile，如果 -I 路径写得不对，代码也是编译不通过的。所以需要拷贝一份 .ycm_extra_conf.py 文件到项目的根目录，打开该文件找到标识 flags = [，参考 Makefile 中依赖的路径，也把相关的依赖路径填充进去（支持相对路径）。注意：.ycm_extra_conf.py 设置相对路径的，vim 需要在根目录（.ycm_extra_conf.py 所在路径）打开这样 ycm 才能正常跳转。</p>

<hr />

<h3 id="32-golang">3.2. golang</h3>

<p><code class="highlighter-rouge">vim-go</code>：Golang 开发环境的vim插件。vim-go 这货有点坑，有些依赖代码用的是墙外的链接，不能翻墙的，:GoInstallBinaries 怎么安装都漏东西，升级失败。参考插件配置，缺哪个，补哪个。</p>

<p>参考：https://www.golangtc.com/download/package</p>

<p><img src="/images/2020-04-22-13-30-01.png" alt="golang 编译依赖配置" data-action="zoom" /></p>

<hr />

<blockquote>
  <p>🔥文章来源：<a href="https://wenfh2020.com/">wenfh2020.com</a></p>
</blockquote>
