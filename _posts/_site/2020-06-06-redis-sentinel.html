<p>redis 有主从数据复制功能。多个实例通过读写分离，使得单进程的 redis 可以充分利用多核性能。</p>

<p>一般情况下 master 可读可写，slave 只读。当 master 节点掉线或异常退出后，redis 集群只剩下 slave 节点，它们不支持写操作。这时必须重新找一个 master，方法就是从剩下的 slave 节点中，选出一个，并把它角色转变为 master，使得 redis 集群能恢复工作。</p>

<p>这时故障转移管理者 <code class="highlighter-rouge">sentinel</code> 应运而生。它负责 redis 集群管理工作，保证高可用性能。</p>

<ul id="markdown-toc">
  <li><a href="#1-sentinel-作用" id="markdown-toc-1-sentinel-作用">1. sentinel 作用</a></li>
  <li><a href="#2-节点关系" id="markdown-toc-2-节点关系">2. 节点关系</a></li>
  <li><a href="#3-故障" id="markdown-toc-3-故障">3. 故障</a>    <ul>
      <li><a href="#31-检测故障" id="markdown-toc-31-检测故障">3.1. 检测故障</a></li>
      <li><a href="#32-发现故障" id="markdown-toc-32-发现故障">3.2. 发现故障</a></li>
      <li><a href="#33-故障转移" id="markdown-toc-33-故障转移">3.3. 故障转移</a></li>
    </ul>
  </li>
  <li><a href="#4-故障转移流程" id="markdown-toc-4-故障转移流程">4. 故障转移流程</a></li>
  <li><a href="#5-问题" id="markdown-toc-5-问题">5. 问题</a></li>
  <li><a href="#流程" id="markdown-toc-流程">流程</a></li>
  <li><a href="#6-参考" id="markdown-toc-6-参考">6. 参考</a></li>
</ul>

<hr />

<h2 id="1-sentinel-作用">1. sentinel 作用</h2>

<ol>
  <li>监控： 检查 redis 节点健康状况。</li>
  <li>故障转移：当 redis 集群节点出现故障时，及时自动进行故障转移。</li>
  <li>通知：检测到 redis 实例出现故障，通过 api 进行通知用户。</li>
  <li>提供配置：用户可以查询当前 redis 集群节点信息。例如：查询哪个 redis 节点是 master，哪个是 slave。</li>
</ol>

<blockquote>
  <p>故障检测，故障发现，故障转移。</p>
</blockquote>

<hr />

<h2 id="2-节点关系">2. 节点关系</h2>

<p>redis 高可用集群中，有两种对象，三中角色：sentinel，redis master，redis slave。</p>

<ol>
  <li>sentinel 节点间相互链接通信。</li>
  <li>sentinel 每个节点与 redis 每个节点相互链接通信。</li>
  <li>redis master 与 slave 需要数据复制需要，相互链接。slave 之间一般不相互链接通信，除非是 <code class="highlighter-rouge">slave</code> 与 <code class="highlighter-rouge">sub-slave</code> 关系。</li>
</ol>

<p><img src="/images/2020-06-06-15-48-59.png" alt="高可用节点通信关系" data-action="zoom" /></p>

<h2 id="3-故障">3. 故障</h2>

<h3 id="31-检测故障">3.1. 检测故障</h3>

<p>sentinel 如何把集群管理起来，如何监控 redis。</p>

<h3 id="32-发现故障">3.2. 发现故障</h3>

<h3 id="33-故障转移">3.3. 故障转移</h3>

<hr />

<h2 id="4-故障转移流程">4. 故障转移流程</h2>

<p>需要多个 sentinel 确认 redis 节点掉线，并选举其中一个 sentinel 作为 leader 进行故障转移。</p>

<ol>
  <li>其中一个 sentinel 监控到 master 掉线。该 master 被认为是主观掉线。</li>
  <li>所有 sentinel 都监控到 master 掉线，要把 master 确认为客观掉线。</li>
  <li>从 sentinel 中选出一个 sentinel 作为 leader 对 redis 集群进行故障转移。</li>
  <li>sentienl leader 从剩余的 slave 中，选出一个，并将其设置为 master。</li>
</ol>

<hr />

<h2 id="5-问题">5. 问题</h2>

<ol>
  <li>选举流程。</li>
  <li>监控故障。</li>
  <li>发现故障，主客观掉线。</li>
  <li>故障转移流程。</li>
  <li>sentinel 与 redis 通信流程。</li>
</ol>

<hr />

<h2 id="流程">流程</h2>

<ol>
  <li>启动 master 和 slave。</li>
  <li>启动 sentinel 监控三个节点的情况。</li>
</ol>

<p>cdxds</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 60<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 66<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 90<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 52<span class="o">)</span>            <span class="o">=</span> 0
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42899<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 62<span class="o">)</span> <span class="o">=</span> 2
sendto<span class="o">(</span>8, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}]</span>, 10128, 61<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>8, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>9, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 61<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 266
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 60<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 55<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 55<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 55<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 75<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 71<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 58<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 57<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 57<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 100<span class="o">)</span>           <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 2
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">INFO</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">INFO</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 70<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>8, <span class="s2">"</span><span class="nv">$3664</span><span class="se">\r\n</span><span class="s2"># Server</span><span class="se">\r\n</span><span class="s2">redis_version:5"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 3673
recvfrom<span class="o">(</span>10, <span class="s2">"</span><span class="nv">$3775</span><span class="se">\r\n</span><span class="s2"># Server</span><span class="se">\r\n</span><span class="s2">redis_version:5"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 3784
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 70<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 52<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 55<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 70<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 70<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 69<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 76<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 90<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 55<span class="o">)</span>            <span class="o">=</span> 0
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42899<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 90<span class="o">)</span> <span class="o">=</span> 2
sendto<span class="o">(</span>8, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 89<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}]</span>, 10128, 89<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>9, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 89<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 266
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 62<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 61<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 60<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 83<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 100<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 99<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 58<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 58<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 57<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 83<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 70<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 62<span class="o">)</span>            <span class="o">=</span> 0
open<span class="o">(</span><span class="s2">"/proc/19901/stat"</span>, O_RDONLY<span class="o">)</span>      <span class="o">=</span> 12
<span class="nb">read</span><span class="o">(</span>12, <span class="s2">"19901 (redis-sentinel) R 13320 1"</span>..., 4096<span class="o">)</span> <span class="o">=</span> 348
close<span class="o">(</span>12<span class="o">)</span>                               <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 83<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 55<span class="o">)</span>            <span class="o">=</span> 0
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42899<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 83<span class="o">)</span> <span class="o">=</span> 2
sendto<span class="o">(</span>8, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 82<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>8, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>9, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 266
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 52<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 52<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 52<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 52<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 83<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 82<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 66<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 65<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 89<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 89<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42899<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 58<span class="o">)</span> <span class="o">=</span> 2
sendto<span class="o">(</span>8, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 57<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>8, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>9, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 266
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 76<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 76<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 75<span class="o">)</span>            <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 76<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 55<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 54<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}]</span>, 10128, 52<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>8, <span class="s2">""</span>, 16384, 0, NULL, NULL<span class="o">)</span>   <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 8, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
close<span class="o">(</span>8<span class="o">)</span>                                <span class="o">=</span> 0
recvfrom<span class="o">(</span>9, <span class="s2">""</span>, 16384, 0, NULL, NULL<span class="o">)</span>   <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 9, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
close<span class="o">(</span>9<span class="o">)</span>                                <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 15<span class="o">)</span>            <span class="o">=</span> 0
socket<span class="o">(</span>AF_INET, SOCK_STREAM, IPPROTO_TCP<span class="o">)</span> <span class="o">=</span> 8
fcntl<span class="o">(</span>8, F_GETFL<span class="o">)</span>                       <span class="o">=</span> 0x2 <span class="o">(</span>flags O_RDWR<span class="o">)</span>
fcntl<span class="o">(</span>8, F_SETFL, O_RDWR|O_NONBLOCK<span class="o">)</span>    <span class="o">=</span> 0
connect<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> EINPROGRESS <span class="o">(</span>Operation now <span class="k">in </span>progress<span class="o">)</span>
setsockopt<span class="o">(</span>8, SOL_TCP, TCP_NODELAY, <span class="o">[</span>1], 4<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 8, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
socket<span class="o">(</span>AF_INET, SOCK_STREAM, IPPROTO_TCP<span class="o">)</span> <span class="o">=</span> 9
fcntl<span class="o">(</span>9, F_GETFL<span class="o">)</span>                       <span class="o">=</span> 0x2 <span class="o">(</span>flags O_RDWR<span class="o">)</span>
fcntl<span class="o">(</span>9, F_SETFL, O_RDWR|O_NONBLOCK<span class="o">)</span>    <span class="o">=</span> 0
connect<span class="o">(</span>9, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> EINPROGRESS <span class="o">(</span>Operation now <span class="k">in </span>progress<span class="o">)</span>
setsockopt<span class="o">(</span>9, SOL_TCP, TCP_NODELAY, <span class="o">[</span>1], 4<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 9, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT|EPOLLERR|EPOLLHUP, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT|EPOLLERR|EPOLLHUP, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}]</span>, 10128, 55<span class="o">)</span> <span class="o">=</span> 2
connect<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> ECONNREFUSED <span class="o">(</span>Connection refused<span class="o">)</span>
getsockopt<span class="o">(</span>8, SOL_SOCKET, SO_ERROR, <span class="o">[</span>0], <span class="o">[</span>4]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 8, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
close<span class="o">(</span>8<span class="o">)</span>                                <span class="o">=</span> 0
connect<span class="o">(</span>9, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> ECONNREFUSED <span class="o">(</span>Connection refused<span class="o">)</span>
getsockopt<span class="o">(</span>9, SOL_SOCKET, SO_ERROR, <span class="o">[</span>0], <span class="o">[</span>4]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 9, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
close<span class="o">(</span>9<span class="o">)</span>                                <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 66<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 66<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 66<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 65<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
socket<span class="o">(</span>AF_INET, SOCK_STREAM, IPPROTO_TCP<span class="o">)</span> <span class="o">=</span> 8
fcntl<span class="o">(</span>8, F_GETFL<span class="o">)</span>                       <span class="o">=</span> 0x2 <span class="o">(</span>flags O_RDWR<span class="o">)</span>
fcntl<span class="o">(</span>8, F_SETFL, O_RDWR|O_NONBLOCK<span class="o">)</span>    <span class="o">=</span> 0
connect<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> EINPROGRESS <span class="o">(</span>Operation now <span class="k">in </span>progress<span class="o">)</span>
setsockopt<span class="o">(</span>8, SOL_TCP, TCP_NODELAY, <span class="o">[</span>1], 4<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 8, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
socket<span class="o">(</span>AF_INET, SOCK_STREAM, IPPROTO_TCP<span class="o">)</span> <span class="o">=</span> 9
fcntl<span class="o">(</span>9, F_GETFL<span class="o">)</span>                       <span class="o">=</span> 0x2 <span class="o">(</span>flags O_RDWR<span class="o">)</span>
fcntl<span class="o">(</span>9, F_SETFL, O_RDWR|O_NONBLOCK<span class="o">)</span>    <span class="o">=</span> 0
connect<span class="o">(</span>9, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> EINPROGRESS <span class="o">(</span>Operation now <span class="k">in </span>progress<span class="o">)</span>
setsockopt<span class="o">(</span>9, SOL_TCP, TCP_NODELAY, <span class="o">[</span>1], 4<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 9, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}})</span> <span class="o">=</span> 0
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42921<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT|EPOLLERR|EPOLLHUP, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT|EPOLLERR|EPOLLHUP, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}]</span>, 10128, 70<span class="o">)</span> <span class="o">=</span> 2
connect<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> ECONNREFUSED <span class="o">(</span>Connection refused<span class="o">)</span>
getsockopt<span class="o">(</span>8, SOL_SOCKET, SO_ERROR, <span class="o">[</span>0], <span class="o">[</span>4]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 8, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
close<span class="o">(</span>8<span class="o">)</span>                                <span class="o">=</span> 0
connect<span class="o">(</span>9, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> ECONNREFUSED <span class="o">(</span>Connection refused<span class="o">)</span>
getsockopt<span class="o">(</span>9, SOL_SOCKET, SO_ERROR, <span class="o">[</span>0], <span class="o">[</span>4]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 9, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 70<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
socket<span class="o">(</span>AF_INET, SOCK_STREAM, IPPROTO_TCP<span class="o">)</span> <span class="o">=</span> 8
fcntl<span class="o">(</span>8, F_GETFL<span class="o">)</span>                       <span class="o">=</span> 0x2 <span class="o">(</span>flags O_RDWR<span class="o">)</span>
fcntl<span class="o">(</span>8, F_SETFL, O_RDWR|O_NONBLOCK<span class="o">)</span>    <span class="o">=</span> 0
connect<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> EINPROGRESS <span class="o">(</span>Operation now <span class="k">in </span>progress<span class="o">)</span>
setsockopt<span class="o">(</span>8, SOL_TCP, TCP_NODELAY, <span class="o">[</span>1], 4<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 8, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
socket<span class="o">(</span>AF_INET, SOCK_STREAM, IPPROTO_TCP<span class="o">)</span> <span class="o">=</span> 9
fcntl<span class="o">(</span>9, F_GETFL<span class="o">)</span>                       <span class="o">=</span> 0x2 <span class="o">(</span>flags O_RDWR<span class="o">)</span>
fcntl<span class="o">(</span>9, F_SETFL, O_RDWR|O_NONBLOCK<span class="o">)</span>    <span class="o">=</span> 0
connect<span class="o">(</span>9, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> <span class="nt">-1</span> EINPROGRESS <span class="o">(</span>Operation now <span class="k">in </span>progress<span class="o">)</span>
setsockopt<span class="o">(</span>9, SOL_TCP, TCP_NODELAY, <span class="o">[</span>1], 4<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 9, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}})</span> <span class="o">=</span> 0
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42925<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}]</span>, 10128, 62<span class="o">)</span> <span class="o">=</span> 2
connect<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> 0
sendto<span class="o">(</span>8, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$6</span><span class="se">\r\n</span><span class="s2">CLIENT</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">SETNAME</span><span class="se">\r\n</span><span class="nv">$21</span><span class="s2">"</span>..., 204, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 204
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 8, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
connect<span class="o">(</span>9, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>6379<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, 16<span class="o">)</span> <span class="o">=</span> 0
sendto<span class="o">(</span>9, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$6</span><span class="se">\r\n</span><span class="s2">CLIENT</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">SETNAME</span><span class="se">\r\n</span><span class="nv">$24</span><span class="s2">"</span>..., 104, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 104
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_DEL, 9, 0x7ffc3fe17734<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_ADD, 9, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}]</span>, 10128, 61<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>8, <span class="s2">"+OK</span><span class="se">\r\n</span><span class="s2">+PONG</span><span class="se">\r\n</span><span class="s2">:0</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 16
recvfrom<span class="o">(</span>9, <span class="s2">"+OK</span><span class="se">\r\n</span><span class="s2">*3</span><span class="se">\r\n</span><span class="nv">$9</span><span class="se">\r\n</span><span class="s2">subscribe</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__s"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 53
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 51<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 51<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 62<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 62<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 61<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 51<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 51<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 100<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 100<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 66<span class="o">)</span> <span class="o">=</span> 2
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">INFO</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">INFO</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 65<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"</span><span class="nv">$3640</span><span class="se">\r\n</span><span class="s2"># Server</span><span class="se">\r\n</span><span class="s2">redis_version:5"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 3649
write<span class="o">(</span>1, <span class="s2">"19901:X 08 Jun 2020 17:23:21.455"</span>..., 74<span class="o">)</span> <span class="o">=</span> 74
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 64<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"</span><span class="nv">$3757</span><span class="se">\r\n</span><span class="s2"># Server</span><span class="se">\r\n</span><span class="s2">redis_version:5"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 3766
open<span class="o">(</span><span class="s2">"/proc/19901/stat"</span>, O_RDONLY<span class="o">)</span>      <span class="o">=</span> 12
<span class="nb">read</span><span class="o">(</span>12, <span class="s2">"19901 (redis-sentinel) R 13320 1"</span>..., 4096<span class="o">)</span> <span class="o">=</span> 348
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42925<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 58<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 58<span class="o">)</span> <span class="o">=</span> 3
recvfrom<span class="o">(</span>8, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>9, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 57<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 100<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 99<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 99<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 52<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 52<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 58<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 57<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 61<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 60<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 59<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 55<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 55<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
getsockname<span class="o">(</span>8, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>42925<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 71<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>9, <span class="nv">u64</span><span class="o">=</span>9<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 69<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>9, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 68<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 82<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>8, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 8, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>8, <span class="nv">u64</span><span class="o">=</span>8<span class="o">}}]</span>, 10128, 82<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>8, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
epoll_wait<span class="o">(</span>5, <span class="o">[]</span>, 10128, 81<span class="o">)</span>            <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 52<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*1</span><span class="se">\r\n</span><span class="nv">$4</span><span class="se">\r\n</span><span class="s2">PING</span><span class="se">\r\n</span><span class="s2">"</span>, 14, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 14
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 51<span class="o">)</span> <span class="o">=</span> 1
recvfrom<span class="o">(</span>10, <span class="s2">"+PONG</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 7
getsockname<span class="o">(</span>10, <span class="o">{</span><span class="nv">sa_family</span><span class="o">=</span>AF_INET, <span class="nv">sin_port</span><span class="o">=</span>htons<span class="o">(</span>20192<span class="o">)</span>, <span class="nv">sin_addr</span><span class="o">=</span>inet_addr<span class="o">(</span><span class="s2">"127.0.0.1"</span><span class="o">)}</span>, <span class="o">[</span>16]<span class="o">)</span> <span class="o">=</span> 0
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN|EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLOUT, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}]</span>, 10128, 55<span class="o">)</span> <span class="o">=</span> 1
sendto<span class="o">(</span>10, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">PUBLISH</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 133, 0, NULL, 0<span class="o">)</span> <span class="o">=</span> 133
epoll_ctl<span class="o">(</span>5, EPOLL_CTL_MOD, 10, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}})</span> <span class="o">=</span> 0
epoll_wait<span class="o">(</span>5, <span class="o">[{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>10, <span class="nv">u64</span><span class="o">=</span>10<span class="o">}}</span>, <span class="o">{</span>EPOLLIN, <span class="o">{</span><span class="nv">u32</span><span class="o">=</span>11, <span class="nv">u64</span><span class="o">=</span>11<span class="o">}}]</span>, 10128, 54<span class="o">)</span> <span class="o">=</span> 2
recvfrom<span class="o">(</span>10, <span class="s2">":1</span><span class="se">\r\n</span><span class="s2">"</span>, 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 4
recvfrom<span class="o">(</span>11, <span class="s2">"*3</span><span class="se">\r\n</span><span class="nv">$7</span><span class="se">\r\n</span><span class="s2">message</span><span class="se">\r\n</span><span class="nv">$18</span><span class="se">\r\n</span><span class="s2">__sentinel"</span>..., 16384, 0, NULL, NULL<span class="o">)</span> <span class="o">=</span> 133
epoll_wait<span class="o">(</span>5,  &lt;detached ...&gt;
</code></pre></div></div>

<hr />

<h2 id="6-参考">6. 参考</h2>

<ul>
  <li><a href="https://redis.io/topics/sentinel">Redis Sentinel Documentation</a></li>
  <li><a href="https://wenfh2020.com/2020/05/17/redis-replication/">[redis 源码走读] 主从数据复制（上）</a></li>
  <li><a href="https://wenfh2020.com/2020/05/31/redis-replication-next/">[redis 源码走读] 主从数据复制（下）</a></li>
  <li>《redis 实现与设计》</li>
  <li><a href="https://blog.csdn.net/cainaioaaa/article/details/79881296">分布式算法之选举算法Raft</a></li>
  <li><a href="http://blog.itpub.net/31556438/viewspace-2637112/">10分钟弄懂Raft算法</a></li>
</ul>

<hr />

<blockquote>
  <p>🔥文章来源：<a href="https://wenfh2020.com/">wenfh2020.com</a></p>
</blockquote>
