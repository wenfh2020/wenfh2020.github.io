I"W<p>ç¨‹åºçš„å·¥ä½œæµç¨‹ï¼šé«˜çº§è¯­è¨€ -&gt; ç¼–è¯‘å™¨ -&gt; ä½çº§è¯­è¨€æŒ‡ä»¤ -&gt; ç³»ç»Ÿç®¡ç†è¿è¡Œç¨‹åº &lt;â€”&gt; ç¡¬ä»¶ã€‚</p>

<ul id="markdown-toc">
  <li><a href="#1-è¿›ç¨‹è™šæ‹Ÿå†…å­˜" id="markdown-toc-1-è¿›ç¨‹è™šæ‹Ÿå†…å­˜">1. è¿›ç¨‹è™šæ‹Ÿå†…å­˜</a></li>
  <li><a href="#2-å·¥ä½œæµç¨‹" id="markdown-toc-2-å·¥ä½œæµç¨‹">2. å·¥ä½œæµç¨‹</a></li>
  <li><a href="#3-å‚è€ƒ" id="markdown-toc-3-å‚è€ƒ">3. å‚è€ƒ</a></li>
</ul>

<h2 id="1-è¿›ç¨‹è™šæ‹Ÿå†…å­˜">1. è¿›ç¨‹è™šæ‹Ÿå†…å­˜</h2>

<p>è¿›ç¨‹ä¸å…è®¸ç›´æ¥è®¿é—®ç‰©ç†å†…å­˜ï¼Œç³»ç»Ÿé€šè¿‡è™šæ‹Ÿå†…å­˜æ–¹å¼ç®¡ç†è¿›ç¨‹å†…å­˜ã€‚</p>

<p><img src="/images/2020-02-20-14-22-08.png" alt="è¿›ç¨‹åœ°å€ç©ºé—´" data-action="zoom" /></p>

<blockquote>
  <p>å›¾ç‰‡æ¥æº ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹8.2.3 ç§æœ‰åœ°å€ç©ºé—´</p>
</blockquote>

<hr />

<h2 id="2-å·¥ä½œæµç¨‹">2. å·¥ä½œæµç¨‹</h2>

<p>é«˜çº§è¯­è¨€ -&gt; ç¼–è¯‘å™¨ -&gt; ä½çº§è¯­è¨€æŒ‡ä»¤ -&gt; ç³»ç»ŸåŠ è½½è¿è¡Œ</p>

<ul>
  <li>ç¨‹åºç¼–è¯‘æ‰§è¡Œæµç¨‹ã€‚</li>
</ul>

<p><img src="/images/2020-04-28-12-54-46.png" alt="ç¼–è¯‘æµç¨‹" data-action="zoom" /></p>

<ul>
  <li>ç¨‹åºå¯åŠ¨é€€å‡ºæµç¨‹ã€‚</li>
</ul>

<p><img src="/images/2020-04-29-10-38-48.png" alt="ç¨‹åºå¯åŠ¨é€€å‡ºæµç¨‹" data-action="zoom" /></p>

<blockquote>
  <p>å›¾ç‰‡æ¥æºï¼š ã€ŠUNIX ç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹7.3.2 atexitå‡½æ•°</p>
</blockquote>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// glibc - start.c</span>
<span class="k">static</span> <span class="kt">void</span>
<span class="n">start1</span> <span class="p">(</span><span class="n">ARG_DUMMIES</span> <span class="n">argc</span><span class="p">,</span> <span class="n">argp</span><span class="p">)</span>
     <span class="n">DECL_DUMMIES</span>
     <span class="kt">int</span> <span class="n">argc</span><span class="p">;</span>
     <span class="kt">char</span> <span class="o">*</span><span class="n">argp</span><span class="p">;</span>
<span class="p">{</span>
  <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">argp</span><span class="p">;</span>

  <span class="cm">/* The environment starts just after ARGV.  */</span>
  <span class="n">__environ</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">argv</span><span class="p">[</span><span class="n">argc</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>

  <span class="cm">/* If the first thing after ARGV is the arguments
     themselves, there is no environment.  */</span>
  <span class="k">if</span> <span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span> <span class="n">__environ</span> <span class="o">==</span> <span class="o">*</span><span class="n">argv</span><span class="p">)</span>
    <span class="cm">/* The environment is empty.  Make __environ
       point at ARGV[ARGC], which is NULL.  */</span>
    <span class="o">--</span><span class="n">__environ</span><span class="p">;</span>

  <span class="cm">/* Do C library initializations.  */</span>
  <span class="n">__libc_init</span> <span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">__environ</span><span class="p">);</span>

  <span class="cm">/* Call the user program.  */</span>
  <span class="n">exit</span> <span class="p">(</span><span class="n">main</span> <span class="p">(</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="n">__environ</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>ç¨‹åºè¿è¡Œæµç¨‹ã€‚</li>
</ul>

<p><img src="/images/2020-04-29-11-39-52.png" alt="ç¨‹åºè¿è¡Œæµç¨‹" data-action="zoom" /></p>

<hr />

<h2 id="3-å‚è€ƒ">3. å‚è€ƒ</h2>

<ul>
  <li>ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹</li>
  <li>ã€ŠUNIX ç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹</li>
</ul>

<hr />

<blockquote>
  <p>ğŸ”¥æ–‡ç« æ¥æºï¼š<a href="https://wenfh2020.com/2020/04/29/proc-workflow/">wenfh2020.com</a></p>
</blockquote>
:ET