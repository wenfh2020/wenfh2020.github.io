I"X<p>å­¦ä¹ ã€Šç®—æ³•å¯¼è®ºã€‹å †æ’åºç®—æ³•ï¼Œåšäº†ä¸€äº›ç¬”è®°ã€‚æµ‹è¯•æºç åœ¨ (<a href="https://github.com/wenfh2020/c_test/blob/master/algorithms/heap_sort.cpp">github</a>)</p>

<ul id="markdown-toc">
  <li><a href="#1-å †" id="markdown-toc-1-å †">1. å †</a></li>
  <li><a href="#2-å †æ’åºè¿‡ç¨‹" id="markdown-toc-2-å †æ’åºè¿‡ç¨‹">2. å †æ’åºè¿‡ç¨‹</a>    <ul>
      <li><a href="#21-å †åŒ–" id="markdown-toc-21-å †åŒ–">2.1. å †åŒ–</a></li>
      <li><a href="#22-å»ºå †" id="markdown-toc-22-å»ºå †">2.2. å»ºå †</a></li>
      <li><a href="#23-æ’åº" id="markdown-toc-23-æ’åº">2.3. æ’åº</a></li>
    </ul>
  </li>
  <li><a href="#3-ä¼˜å…ˆé˜Ÿåˆ—" id="markdown-toc-3-ä¼˜å…ˆé˜Ÿåˆ—">3. ä¼˜å…ˆé˜Ÿåˆ—</a>    <ul>
      <li><a href="#31-heap-maxinum" id="markdown-toc-31-heap-maxinum">3.1. HEAP-MAXINUM</a></li>
      <li><a href="#32-heap-extract-max" id="markdown-toc-32-heap-extract-max">3.2. HEAP-EXTRACT-MAX</a></li>
      <li><a href="#33-heap-increaase-key" id="markdown-toc-33-heap-increaase-key">3.3. HEAP-INCREAASE-KEY</a></li>
      <li><a href="#34-max-heap-insert" id="markdown-toc-34-max-heap-insert">3.4. MAX-HEAP-INSERT</a></li>
    </ul>
  </li>
  <li><a href="#4-å‚è€ƒ" id="markdown-toc-4-å‚è€ƒ">4. å‚è€ƒ</a></li>
</ul>

<hr />

<h2 id="1-å †">1. å †</h2>

<p>å †å¯ä»¥çœ‹æˆä¸€ä¸ªè¿‘ä¼¼çš„å®Œå…¨äºŒå‰æ ‘ï¼Œé™¤äº†åº•å±‚å¤–ï¼Œè¯¥æ ‘æ˜¯å®Œå…¨å……æ»¡çš„ï¼Œè€Œä¸”æ˜¯ä»å·¦åˆ°å³å¡«å……ã€‚</p>
<blockquote>
  <p>å®Œå…¨äºŒå‰æ ‘é€‚åˆç”¨æ•°ç»„æ¥å­˜å‚¨ã€‚ç”¨æ•°ç»„æ¥å­˜å‚¨å®Œå…¨äºŒå‰æ ‘æ˜¯éå¸¸èŠ‚çœå­˜å‚¨ç©ºé—´çš„ã€‚</p>
</blockquote>

<p>æœ€å¤§å †ä¸­ï¼Œæ˜¯æŒ‡é™¤äº†æ ¹ç»“ç‚¹å¤–ï¼ˆæ ¹ç»“ç‚¹æ²¡æœ‰ parentï¼‰ï¼Œæ‰€æœ‰ç»“ç‚¹çš„ i éƒ½åº”è¯¥æ»¡è¶³ï¼š
<script type="math/tex">A[PARENT(i)] \ge A[i]</script></p>

<p><img src="/images/2020-05-28-15-20-18.png" alt="å †æ•°æ®-æ•°ç»„-äºŒå‰æ ‘" data-action="zoom" /></p>

<p>å †è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œé‚£ä¹ˆè¯¥å †å †é«˜åº¦æˆæ­£æ¯” $O(lgn)$ ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œå †ç»“æ„ä¸Šçš„ä¸€äº›åŸºæœ¬æ“ä½œçš„è¿è¡Œæ—¶é—´è‡³å¤šä¸æ ‘çš„é«˜åº¦æˆæ­£æ¯”ï¼Œå³å®é™…å¤æ‚åº¦ä¸º $O(lgn)$ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">parent</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">int</span> <span class="nf">left</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
<span class="kt">int</span> <span class="nf">right</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="2-å †æ’åºè¿‡ç¨‹">2. å †æ’åºè¿‡ç¨‹</h2>

<p>MAX-HEAPIFYï¼ˆå †åŒ–ï¼‰ï¼šå°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹ã€‚</p>

<p>BUILD-MAX-HEADï¼ˆå»ºå †ï¼‰ï¼šä»æ— åºæ•°æ®æ•°ç»„ä¸­æ„é€ ä¸€ä¸ªæœ€å¤§å †ã€‚</p>

<p>HEAPSORTï¼ˆæ’åºï¼‰ï¼šå¯¹æ•°ç»„è¿›è¡ŒåŸå€æ’åºï¼Œç§»é™¤ä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶åšæœ€å¤§å †è°ƒæ•´çš„é€’å½’è¿ç®—ã€‚</p>

<hr />

<h3 id="21-å †åŒ–">2.1. å †åŒ–</h3>

<p>å †åŒ–è®©æ•°å€¼å¤§çš„ç»“ç‚¹å¾€ä¸Šæµ®ï¼Œè®©å°çš„ç»“ç‚¹é€æ¸ä¸‹æ²‰ã€‚</p>

<p><img src="/images/2020-05-28-15-20-42.png" alt="å †åŒ–æµç¨‹" data-action="zoom" /></p>

<p><img src="/images/2020-05-28-15-20-58.png" alt="å †åŒ–ä¼ªä»£ç " data-action="zoom" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">max_heapify</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">largest</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">left</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="n">right</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">size</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="n">l</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&lt;=</span> <span class="n">size</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">array</span><span class="p">[</span><span class="n">largest</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">largest</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">largest</span> <span class="o">!=</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">array</span><span class="p">[</span><span class="n">largest</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">max_heapify</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">largest</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="22-å»ºå †">2.2. å»ºå †</h3>

<p>é€šè¿‡äºŒå‰æ ‘ç»“ç‚¹è‡ªåº•å‘ä¸Šçš„æ–¹æ³•ï¼Œåˆ©ç”¨å †åŒ–è¿‡ç¨‹ï¼ŒæŠŠä¸€ä¸ªå¤§å°ä¸º n = A.length çš„æ•°ç»„ A = [1â€¦n] è½¬æ¢ä¸ºæœ€å¤§å †ã€‚BUILD-MAX-HEAP æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$</p>

<p><img src="/images/2020-05-28-15-21-21.png" alt="å»ºå †ä¼ªä»£ç " data-action="zoom" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">build_max_heap</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="n">len</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">max_heapify</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="23-æ’åº">2.3. æ’åº</h3>

<p>BUILD-MAX-HEAP ä¼šå°†æ•°ç»„ A[1â€¦n] å»ºæˆæœ€å¤§å †ã€‚æœ€å¤§å †å…ƒç´ åœ¨æ ¹ç»“ç‚¹ A[1]ï¼Œå»æ‰ A[1] åï¼ŒA[1] çš„å·¦å³å­©å­ç»“ç‚¹ä»ç„¶æ˜¯æœ€å¤§å †ã€‚å¦‚æœæŠŠ A[n] æ›¿æ¢ A[1]ï¼Œç ´åäº†æœ€å¤§å †æ€§è´¨ï¼Œå°†é‡æ–°å¯¹ A[1â€¦n-1] æ•°ç»„è¿›è¡Œå †åŒ–ï¼Œä½¿å…¶å˜æˆæœ€å¤§å †ã€‚å¦‚æ­¤é€’å½’é‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚</p>

<p><img src="/images/2020-05-28-15-21-42.png" alt="æ’åºæµç¨‹" data-action="zoom" /></p>

<p><img src="/images/2020-05-28-15-21-57.png" alt="ä¼ªä»£ç " data-action="zoom" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">heap_sort</span><span class="o">::</span><span class="n">heap_sort</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">m_data_size</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// å»ºå †å¤„ç†åï¼Œçˆ¶ç»“ç‚¹ &gt; å­ç»“ç‚¹</span>
    <span class="n">build_max_heap</span><span class="p">(</span><span class="n">m_array</span><span class="p">,</span> <span class="n">m_data_size</span><span class="p">);</span>
    <span class="c1">// å»ºå †åï¼Œå †é¡¶ç»“ç‚¹ï¼ˆæ ¹ç»“ç‚¹ï¼‰æ˜¯æœ€å¤§æ•°å€¼ï¼ŒæŠŠæœ€å¤§å€¼æ”¾åˆ°æ•°ç»„æœ€åã€‚åŸæ•°ç»„æœ€åä¸€ä¸ªç»“ç‚¹ç½®æ¢åˆ°æ ¹ç»“ç‚¹ã€‚</span>
    <span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">m_array</span><span class="p">[</span><span class="n">m_data_size</span><span class="p">]);</span>

    <span class="c1">// æ’é™¤æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå†å¯¹å‰©ä½™å †è¿›è¡Œå †åŒ–ï¼Œå†æŠŠå †åŒ–çš„æ ¹ç»“ç‚¹æ”¾åˆ°æ•°ç»„æœ€åã€‚</span>
    <span class="n">m_data_size</span><span class="o">--</span><span class="p">;</span>

    <span class="c1">// ä»ä¸Šåˆ°ä¸‹ï¼ˆçˆ¶èŠ‚ç‚¹åˆ°å­æ ‘ç»“ç‚¹ï¼‰</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">m_data_size</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">max_heapify</span><span class="p">(</span><span class="n">m_array</span><span class="p">,</span> <span class="n">m_data_size</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">m_array</span><span class="p">[</span><span class="n">m_data_size</span><span class="p">]);</span>
        <span class="n">m_data_size</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="3-ä¼˜å…ˆé˜Ÿåˆ—">3. ä¼˜å…ˆé˜Ÿåˆ—</h2>

<p>åœ¨è®¡ç®—æœºç³»ç»Ÿçš„ä½œä¸šè°ƒåº¦ä¸­ï¼Œä»»åŠ¡éœ€è¦æ ¹æ®ä¼˜å…ˆçº§è¿›è¡Œæ‰§è¡Œã€‚å¯ä»¥æ ¹æ®å †ç®—æ³•ï¼ˆæœ€å¤§å †ï¼‰ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½èµ‹äºˆä¸€ä¸ªä¼˜å…ˆçº§æ•°å€¼ï¼Œé€‰å‡ºæœ€é«˜ä¼˜å…ˆçº§ï¼ˆæœ€å¤§å †å †é¡¶ï¼‰ä½œä¸šä»»åŠ¡æ‰§è¡Œã€‚æ¶‰åŠä»»åŠ¡å¤„ç†ï¼Œä¸€èˆ¬éƒ½æœ‰å¢åˆ æ”¹æŸ¥çš„æ“ä½œã€‚
ç†è§£äº†å»ºå †ï¼Œå †åŒ–å’Œæ’åºçš„æµç¨‹ï¼Œé˜Ÿåˆ—çš„è¿™äº›æ“ä½œåº”è¯¥éƒ½æ¯”è¾ƒå¥½ç†è§£äº†ã€‚</p>

<hr />

<h3 id="31-heap-maxinum">3.1. HEAP-MAXINUM</h3>

<p>è·å–å †é¡¶å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$</p>

<p><img src="/images/2020-05-28-15-25-20.png" alt="è·å–å †é¡¶å…ƒç´ " data-action="zoom" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="n">heap_sort</span><span class="o">::</span><span class="n">heap_maxinum</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">m_data_size</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_is_build_heap</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">build_max_heap</span><span class="p">(</span><span class="n">m_array</span><span class="p">,</span> <span class="n">m_data_size</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="32-heap-extract-max">3.2. HEAP-EXTRACT-MAX</h3>

<p>åˆ é™¤å †é¡¶å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(n)$</p>

<p><img src="/images/2020-05-28-15-22-31.png" alt="åˆ é™¤å †é¡¶å…ƒç´ " data-action="zoom" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="n">heap_sort</span><span class="o">::</span><span class="n">heap_extract_max</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">m_data_size</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_is_build_heap</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">build_max_heap</span><span class="p">(</span><span class="n">m_array</span><span class="p">,</span> <span class="n">m_data_size</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">n</span> <span class="o">=</span> <span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">m_array</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">m_array</span><span class="p">[</span><span class="n">m_data_size</span><span class="p">]);</span>
    <span class="n">m_data_size</span><span class="o">--</span><span class="p">;</span>
    <span class="n">max_heapify</span><span class="p">(</span><span class="n">m_array</span><span class="p">,</span> <span class="n">m_data_size</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="33-heap-increaase-key">3.3. HEAP-INCREAASE-KEY</h3>

<p>å¢åŠ å †æŒ‡å®šå…ƒç´ ï¼ˆä»»åŠ¡ï¼‰çš„æ•°å€¼ï¼ŒHEAP-INCREAASE-KEY æ—¶é—´å¤æ‚åº¦ä¸º $O(lgn)$</p>

<p><img src="/images/2020-05-28-15-22-57.png" alt="å¢åŠ æ•°å€¼" data-action="zoom" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="n">heap_sort</span><span class="o">::</span><span class="n">heap_increase_key</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">m_data_size</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_is_build_heap</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">build_max_heap</span><span class="p">(</span><span class="n">m_array</span><span class="p">,</span> <span class="n">m_data_size</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// è¿™é‡Œè·Ÿ build_max_heap é“ç†ä¸€æ ·ï¼Œåªæ˜¯ build_max_heap</span>
    <span class="c1">// æ˜¯è‡ªåº•å‘ä¸Šï¼Œheap_increase_key æ˜¯ä» i ç»“ç‚¹å‘ä¸Š</span>
    <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">&lt;</span> <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)],</span> <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="34-max-heap-insert">3.4. MAX-HEAP-INSERT</h3>

<p>æ’å…¥æ–°å…ƒç´ åˆ°æœ€å¤§å †æœ«ä½ï¼Œä¹Ÿå°±æ˜¯åœ¨æœ€å¤§å †ä¸Šå¢åŠ ä¸€ä¸ªå¶å­ï¼Œå¶å­è‡ªä¸‹è€Œä¸Šä¸å®ƒçš„çˆ¶ç»“ç‚¹æ¯”è¾ƒæ›¿æ¢ã€‚è¿è¡Œæ—¶é—´å¤æ‚åº¦ä¸º $O(lgn)$</p>

<p><img src="/images/2020-05-28-15-23-15.png" alt="æ’å…¥" data-action="zoom" /></p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="n">heap_sort</span><span class="o">::</span><span class="n">max_heap_insert</span><span class="p">(</span><span class="kt">int</span> <span class="n">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">m_data_size</span> <span class="o">&gt;=</span> <span class="n">m_data_len</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">m_is_build_heap</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">build_max_heap</span><span class="p">(</span><span class="n">m_array</span><span class="p">,</span> <span class="n">m_data_size</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// å°†ç»“ç‚¹æ”¾ç½®æ•°ç»„æœ«ä½ï¼Œä¹Ÿå°±æ˜¯åœ¨æœ€å¤§å †ä¸Šå¢åŠ ä¸€ä¸ªå¶å­ï¼Œå¶å­è‡ªä¸‹è€Œä¸Šä¸å®ƒçš„çˆ¶ç»“ç‚¹æ¯”è¾ƒæ›¿æ¢ã€‚</span>
    <span class="n">m_data_size</span><span class="o">++</span><span class="p">;</span>
    <span class="n">m_array</span><span class="p">[</span><span class="n">m_data_size</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span><span class="p">;</span>

    <span class="c1">// è¿™æ˜¯ heap_increase_key ä¸»é€»è¾‘çš„å®ç°ã€‚</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">m_data_size</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="o">&lt;</span> <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">m_array</span><span class="p">[</span><span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">)],</span> <span class="n">m_array</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">parent</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="4-å‚è€ƒ">4. å‚è€ƒ</h2>

<ul>
  <li><a href="https://zh.wikipedia.org/wiki/%E5%A0%86%E6%8E%92%E5%BA%8F">wiki</a></li>
  <li>ã€Šç®—æ³•å¯¼è®ºã€‹ç¬¬å…­ç«  å †æ’åº</li>
  <li><a href="https://blog.csdn.net/every__day/article/details/86580883">å †å’Œå †æ’åºï¼šä¸ºä»€ä¹ˆè¯´å †æ’åºæ²¡æœ‰å¿«é€Ÿæ’åºå¿«</a></li>
</ul>

<hr />

<blockquote>
  <p>ğŸ”¥æ–‡ç« æ¥æºï¼š<a href="https://wenfh2020.com/2019/12/09/heap-sort/">wenfh2020.com</a></p>
</blockquote>
:ET