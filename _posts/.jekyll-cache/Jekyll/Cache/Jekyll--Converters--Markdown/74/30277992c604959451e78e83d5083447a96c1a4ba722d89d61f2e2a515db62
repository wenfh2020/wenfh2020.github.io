I"Íx<p>c++ åŸºç¡€çŸ¥è¯†å›é¡¾ã€‚</p>

<ul id="markdown-toc">
  <li><a href="#1-åŸºç¡€çŸ¥è¯†" id="markdown-toc-1-åŸºç¡€çŸ¥è¯†">1. åŸºç¡€çŸ¥è¯†</a>    <ul>
      <li><a href="#11-const-å¸¸é‡" id="markdown-toc-11-const-å¸¸é‡">1.1. const å¸¸é‡</a></li>
      <li><a href="#12-inline" id="markdown-toc-12-inline">1.2. inline</a></li>
      <li><a href="#13-c-ä¸‰å¤§ç‰¹æ€§" id="markdown-toc-13-c-ä¸‰å¤§ç‰¹æ€§">1.3. C++ ä¸‰å¤§ç‰¹æ€§</a>        <ul>
          <li><a href="#131-å°è£…" id="markdown-toc-131-å°è£…">1.3.1. å°è£…</a></li>
          <li><a href="#132-ç»§æ‰¿" id="markdown-toc-132-ç»§æ‰¿">1.3.2. ç»§æ‰¿</a></li>
          <li><a href="#133-å¤šæ€" id="markdown-toc-133-å¤šæ€">1.3.3. å¤šæ€</a></li>
        </ul>
      </li>
      <li><a href="#14-æ•°ç»„é•¿åº¦æŒ‡é’ˆé•¿åº¦" id="markdown-toc-14-æ•°ç»„é•¿åº¦æŒ‡é’ˆé•¿åº¦">1.4. æ•°ç»„é•¿åº¦ï¼ŒæŒ‡é’ˆé•¿åº¦</a></li>
    </ul>
  </li>
  <li><a href="#2-å…¶å®ƒ" id="markdown-toc-2-å…¶å®ƒ">2. å…¶å®ƒ</a>    <ul>
      <li><a href="#21-malloc-å’Œ-new-åŒºåˆ«" id="markdown-toc-21-malloc-å’Œ-new-åŒºåˆ«">2.1. malloc å’Œ new åŒºåˆ«</a></li>
      <li><a href="#22-ç©ºç±»" id="markdown-toc-22-ç©ºç±»">2.2. ç©ºç±»</a></li>
    </ul>
  </li>
  <li><a href="#3-å‚è€ƒ" id="markdown-toc-3-å‚è€ƒ">3. å‚è€ƒ</a></li>
</ul>

<h2 id="1-åŸºç¡€çŸ¥è¯†">1. åŸºç¡€çŸ¥è¯†</h2>

<h3 id="11-const-å¸¸é‡">1.1. const å¸¸é‡</h3>

<p>const å¯ä»¥ä¿®é¥°å¸¸é‡ï¼Œå¼•ç”¨ï¼Œå‡½æ•°ã€‚</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// å¸¸é‡æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ˜¯å¸¸é‡ï¼Œ(*p)å†…å®¹ä¸èƒ½å˜ã€‚</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="s">"123"</span><span class="p">;</span>

<span class="c1">// æŒ‡é’ˆå¸¸é‡ï¼Œ(p)æŒ‡é’ˆä¸èƒ½å˜ã€‚</span>
<span class="kt">char</span><span class="o">*</span> <span class="k">const</span> <span class="n">p</span> <span class="o">=</span> <span class="s">"123"</span><span class="p">;</span>

<span class="c1">// ä¸å…è®¸ä¿®æ”¹ç±»æ•°æ®æˆå‘˜çš„å€¼ã€‚</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">get_count</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

<span class="c1">// ä¸å…è®¸ä¿®æ”¹è¿”å›æŒ‡é’ˆçš„å†…å®¹ã€‚</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="nf">get_data</span><span class="p">();</span>
</code></pre></div></div>

<hr />
<h3 id="12-inline">1.2. inline</h3>
<p>inline æ˜¯ C++ å…³é”®å­—ï¼Œåœ¨å‡½æ•°å£°æ˜æˆ–å®šä¹‰ä¸­ã€‚åœ¨å‡½æ•°è¿”å›ç±»å‹å‰åŠ ä¸Šå…³é”®å­— inlineï¼Œå³å¯æŠŠå‡½æ•°æŒ‡å®šä¸ºå†…è”å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥è§£å†³ä¸€äº›é¢‘ç¹è°ƒç”¨çš„å‡½æ•°ï¼Œå¤§é‡æ¶ˆè€—æ ˆç©ºé—´ã€‚</p>
<blockquote>
  <p>å¯ä»¥å¯¹æ¯”å®å‡½æ•°</p>
</blockquote>

<ol>
  <li>ä¼˜ç‚¹ï¼š
ä½œä¸ºå‡½æ•°å®šä¹‰çš„å…³é”®å­—ï¼Œè¯´æ˜è¯¥å‡½æ•°æ˜¯å†…è”å‡½æ•°ã€‚å†…è”å‡½æ•°ä¼šå°†ä»£ç å—åµŒå…¥åˆ°æ¯ä¸ªè°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹ï¼Œå†…è”å‡½æ•°å‡å°‘äº†å‡½æ•°çš„è°ƒç”¨ï¼Œä½¿ä»£ç æ‰§è¡Œçš„æ•ˆç‡æé«˜ã€‚</li>
  <li>ç¼ºç‚¹ï¼š
å†…è”æ˜¯ä»¥ä»£ç è†¨èƒ€å¤åˆ¶ä¸ºä»£ä»·ï¼Œä»…ä»…çœå»äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼Œä»è€Œæé«˜å‡½æ•°çš„æ‰§è¡Œæ•ˆç‡ã€‚å¦‚æœæ‰§è¡Œå‡½æ•°ä½“å†…ä»£ç çš„æ—¶é—´ï¼Œç›¸æ¯”äºå‡½æ•°è°ƒç”¨çš„å¼€é”€è¾ƒå¤§ï¼Œé‚£ä¹ˆæ•ˆç‡çš„æ”¶è·ä¼šå¾ˆå°‘ã€‚å¦ä¸€æ–¹é¢ï¼Œæ¯ä¸€å¤„å†…è”å‡½æ•°çš„è°ƒç”¨éƒ½è¦å¤åˆ¶ä»£ç , å°†ä½¿ç¨‹åºçš„æ€»ä»£ç é‡å¢å¤§ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ç©ºé—´ã€‚ä»¥ä¸‹æƒ…å†µä¸å®œä½¿ç”¨å†…è”:
1ï¼‰å¦‚æœå‡½æ•°ä½“å†…çš„ä»£ç æ¯”è¾ƒé•¿ï¼Œä½¿ç”¨å†…è”å°†å¯¼è‡´å†…å­˜æ¶ˆè€—ä»£ä»·è¾ƒé«˜ã€‚
2ï¼‰å¦‚æœå‡½æ•°ä½“å†…å‡ºç°å¾ªç¯ï¼Œé‚£ä¹ˆæ‰§è¡Œå‡½æ•°ä½“å†…ä»£ç çš„æ—¶é—´è¦æ¯”å‡½æ•°è°ƒç”¨çš„å¼€é”€å¤§ã€‚ï¼ˆé€’å½’ï¼‰</li>
</ol>

<hr />
<h3 id="13-c-ä¸‰å¤§ç‰¹æ€§">1.3. C++ ä¸‰å¤§ç‰¹æ€§</h3>
<p>å°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€</p>

<hr />
<h4 id="131-å°è£…">1.3.1. å°è£…</h4>
<p>å°†å¤„ç†çš„æ•°æ®æŠ½è±¡æˆç±»ï¼Œæ“ä½œæ‰§è¡ŒæŠ½è±¡æˆæ–¹æ³•ã€‚ä¾‹å¦‚ file.</p>

<hr />
<h4 id="132-ç»§æ‰¿">1.3.2. ç»§æ‰¿</h4>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;string&gt;
</span>
<span class="k">class</span> <span class="nc">Base</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Base</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Base</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Child</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Base</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Child</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Child</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Child2</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Child</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Child2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Child2</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Child2</span> <span class="n">c</span><span class="p">;</span>
    <span class="n">c</span><span class="p">.</span><span class="n">func2</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>è¿™é‡Œè€ƒå¯Ÿçš„æ˜¯ææ„å‡½æ•°ï¼Œå¤šæ€åŠŸèƒ½ã€‚åœ¨ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°</p>

<p>ç»“æœ</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base construct
child construct
Child2 construct
Child2 func2
Child2 destruct
child destruct
base destruct
</code></pre></div></div>

<hr />
<h4 id="133-å¤šæ€">1.3.3. å¤šæ€</h4>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;string&gt;
</span>
<span class="k">class</span> <span class="nc">Base</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Base</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Base</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Child</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Base</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Child</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Child</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Child2</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Child</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Child2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Child2</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Base</span><span class="o">*</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Child2</span><span class="p">;</span>
    <span class="n">b</span><span class="o">-&gt;</span><span class="n">func2</span><span class="p">();</span>
    <span class="k">delete</span> <span class="n">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ç»“æœ</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base construct
child construct
Child2 construct
Child2 func2
base destruct
</code></pre></div></div>

<hr />
<ul>
  <li>delete å¼ºåˆ¶è½¬æ¢æŒ‡é’ˆå¯¹è±¡å’Œä¸å¼ºåˆ¶è½¬æ¢æ•ˆæœä¸ä¸€æ ·ã€‚</li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Base</span><span class="o">*</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Child2</span><span class="p">;</span>
    <span class="n">b</span><span class="o">-&gt;</span><span class="n">func2</span><span class="p">();</span>
    <span class="k">delete</span> <span class="p">(</span><span class="n">Child2</span><span class="o">*</span><span class="p">)</span><span class="n">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base construct
child construct
Child2 construct
Child2 func2
Child2 destruct
child destruct
base destruct
</code></pre></div></div>

<hr />
<ul>
  <li>è™šææ„å‡½æ•°ï¼Œä¼šè°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream.h&gt;
#include &lt;string&gt;
</span>
<span class="n">class</span> <span class="n">Base</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Base</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">Base</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"base func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">Child</span> <span class="o">:</span> <span class="n">public</span> <span class="n">Base</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Child</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Child</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"child func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="n">class</span> <span class="n">Child2</span> <span class="o">:</span> <span class="n">public</span> <span class="n">Child</span> <span class="p">{</span>
   <span class="nl">public:</span>
    <span class="n">Child2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 construct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Child2</span><span class="p">()</span> <span class="p">{</span> <span class="n">func</span><span class="p">();</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 destruct"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child2 func2"</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Base</span><span class="o">*</span> <span class="n">b</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Child2</span><span class="p">;</span>
    <span class="n">b</span><span class="o">-&gt;</span><span class="n">func2</span><span class="p">();</span>
    <span class="n">delete</span> <span class="n">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ç»“æœ</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base construct
child construct
Child2 construct
Child2 func2
Child2 destruct
child destruct
base destruct
</code></pre></div></div>

<hr />
<h3 id="14-æ•°ç»„é•¿åº¦æŒ‡é’ˆé•¿åº¦">1.4. æ•°ç»„é•¿åº¦ï¼ŒæŒ‡é’ˆé•¿åº¦</h3>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;string&gt;
</span>
<span class="n">class</span> <span class="n">C</span> <span class="p">{</span>
    <span class="nl">public:</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">func</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">func2</span><span class="p">()</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">func3</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"class size: "</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">szArray</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"1234567890"</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">pArray</span> <span class="o">=</span> <span class="s">"1234567890"</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"ptr size:"</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">pArray</span><span class="p">)</span>
            <span class="o">&lt;&lt;</span> <span class="s">", ptr len: "</span> <span class="o">&lt;&lt;</span> <span class="n">strlen</span><span class="p">(</span><span class="n">pArray</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"array size: "</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">szArray</span><span class="p">)</span>
            <span class="o">&lt;&lt;</span> <span class="s">", array len: "</span> <span class="o">&lt;&lt;</span> <span class="n">strlen</span><span class="p">(</span><span class="n">szArray</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ç»“æœï¼š</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class size: 8
ptr size:8, ptr len: 10
array size: 11, array len: 10
</code></pre></div></div>
<blockquote>
  <p>class æœ‰è™šå‡½æ•°ï¼Œæ‰€ä»¥æœ‰è™šå‡½æ•°æŒ‡é’ˆï¼Œæ™®é€šå‡½æ•°å†…å­˜è¢«åˆ†é…åˆ°ä»£ç åŒºï¼Œstatic å‡½æ•°è¢«åˆ†é…åˆ°å…¨å±€æ•°æ®åŒºï¼Œæ‰€ä»¥ sizeof å¤§å°åªæœ‰ virtual çš„è™šå‡½æ•°æŒ‡é’ˆï¼Œ64ä½æœºå™¨ï¼ŒæŒ‡é’ˆé•¿åº¦ 8 ä¸ªå­—èŠ‚ã€‚æ•°ç»„é™¤äº†å­—ç¬¦ä¸²ï¼Œè¿˜æœ‰ç»“æŸç¬¦â€˜\0â€™</p>
</blockquote>

<hr />
<h2 id="2-å…¶å®ƒ">2. å…¶å®ƒ</h2>
<h3 id="21-malloc-å’Œ-new-åŒºåˆ«">2.1. malloc å’Œ new åŒºåˆ«</h3>
<ol>
  <li>å±æ€§ï¼šnew/deleteæ˜¯C++å…³é”®å­—ï¼Œéœ€è¦ç¼–è¯‘å™¨æ”¯æŒã€‚malloc/freeæ˜¯åº“å‡½æ•°ï¼Œéœ€è¦å¤´æ–‡ä»¶æ”¯æŒã€‚</li>
  <li>å‚æ•°ï¼šä½¿ç”¨newæ“ä½œç¬¦ç”³è¯·å†…å­˜åˆ†é…æ—¶æ— é¡»æŒ‡å®šå†…å­˜å—çš„å¤§å°ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç±»å‹ä¿¡æ¯è‡ªè¡Œè®¡ç®—ã€‚è€Œmallocåˆ™éœ€è¦æ˜¾å¼åœ°æŒ‡å‡ºæ‰€éœ€å†…å­˜çš„å°ºå¯¸ã€‚</li>
  <li>è¿”å›ç±»å‹ï¼šnewæ“ä½œç¬¦å†…å­˜åˆ†é…æˆåŠŸæ—¶ï¼Œè¿”å›çš„æ˜¯å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œç±»å‹ä¸¥æ ¼ä¸å¯¹è±¡åŒ¹é…ï¼Œæ— é¡»è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ•…newæ˜¯ç¬¦åˆç±»å‹å®‰å…¨æ€§çš„æ“ä½œç¬¦ã€‚è€Œmallocå†…å­˜åˆ†é…æˆåŠŸåˆ™æ˜¯è¿”å› void<em>ï¼Œéœ€è¦é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢å°†void</em> æŒ‡é’ˆè½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹ã€‚</li>
  <li>åˆ†é…å¤±è´¥ï¼šnewå†…å­˜åˆ†é…å¤±è´¥æ—¶ï¼Œä¼šæŠ›å‡ºbac_allocå¼‚å¸¸ã€‚mallocåˆ†é…å†…å­˜å¤±è´¥æ—¶è¿”å›NULLã€‚</li>
  <li>è‡ªå®šä¹‰ç±»å‹ï¼šnewä¼šå…ˆè°ƒç”¨operator newå‡½æ•°ï¼Œç”³è¯·è¶³å¤Ÿçš„å†…å­˜ï¼ˆé€šå¸¸åº•å±‚ä½¿ç”¨mallocå®ç°ï¼‰ã€‚ç„¶åè°ƒç”¨ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œæœ€åè¿”å›è‡ªå®šä¹‰ç±»å‹æŒ‡é’ˆã€‚deleteå…ˆè°ƒç”¨ææ„å‡½æ•°ï¼Œç„¶åè°ƒç”¨operator deleteå‡½æ•°é‡Šæ”¾å†…å­˜ï¼ˆé€šå¸¸åº•å±‚ä½¿ç”¨freeå®ç°ï¼‰ã€‚ malloc/freeæ˜¯åº“å‡½æ•°ï¼Œåªèƒ½åŠ¨æ€çš„ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œæ— æ³•å¼ºåˆ¶è¦æ±‚å…¶åšè‡ªå®šä¹‰ç±»å‹å¯¹è±¡æ„é€ å’Œææ„å·¥ä½œã€‚</li>
  <li>é‡è½½ï¼šC++å…è®¸é‡è½½new/deleteæ“ä½œç¬¦ï¼Œç‰¹åˆ«çš„ï¼Œå¸ƒå±€newçš„å°±ä¸éœ€è¦ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼Œè€Œæ˜¯æŒ‡å®šäº†ä¸€ä¸ªåœ°å€ä½œä¸ºå†…å­˜èµ·å§‹åŒºåŸŸï¼Œnewåœ¨è¿™æ®µå†…å­˜ä¸Šä¸ºå¯¹è±¡è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼Œå¹¶è¿”å›æ­¤åœ°å€ã€‚è€Œmallocä¸å…è®¸é‡è½½ã€‚</li>
  <li>å†…å­˜åŒºåŸŸï¼šnewæ“ä½œç¬¦ä»<strong>è‡ªç”±å­˜å‚¨åŒºï¼ˆfree storeï¼‰ä¸Šä¸ºå¯¹è±¡åŠ¨æ€åˆ†é…å†…å­˜ç©ºé—´</strong>ï¼Œè€Œmallocå‡½æ•°ä»å †ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜ã€‚è‡ªç”±å­˜å‚¨åŒºæ˜¯C++åŸºäºnewæ“ä½œç¬¦çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå‡¡æ˜¯é€šè¿‡newæ“ä½œç¬¦è¿›è¡Œå†…å­˜ç”³è¯·ï¼Œè¯¥å†…å­˜å³ä¸ºè‡ªç”±å­˜å‚¨åŒºã€‚è€Œå †æ˜¯æ“ä½œç³»ç»Ÿä¸­çš„æœ¯è¯­ï¼Œæ˜¯æ“ä½œç³»ç»Ÿæ‰€ç»´æŠ¤çš„ä¸€å—ç‰¹æ®Šå†…å­˜ï¼Œç”¨äºç¨‹åºçš„å†…å­˜åŠ¨æ€åˆ†é…ï¼ŒCè¯­è¨€ä½¿ç”¨mallocä»å †ä¸Šåˆ†é…å†…å­˜ï¼Œä½¿ç”¨freeé‡Šæ”¾å·²åˆ†é…çš„å¯¹åº”å†…å­˜ã€‚è‡ªç”±å­˜å‚¨åŒºä¸ç­‰äºå †ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œå¸ƒå±€newå°±å¯ä»¥ä¸ä½äºå †ä¸­ã€‚</li>
</ol>

<hr />
<h3 id="22-ç©ºç±»">2.2. ç©ºç±»</h3>
<p>ç©ºç±»å¤§å°ä¸º 1</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;iostream&gt;
</span>
<span class="k">class</span> <span class="nc">C</span> <span class="p">{};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"class size: "</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<p>ç»“æœï¼š</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class size: 1
</code></pre></div></div>
<p>è¿™å°±æ˜¯å®ä¾‹åŒ–çš„åŸå› ï¼ˆç©ºç±»åŒæ ·å¯ä»¥è¢«å®ä¾‹åŒ–ï¼‰ï¼Œæ¯ä¸ªå®ä¾‹åœ¨å†…å­˜ä¸­éƒ½æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åœ°å€ï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œç¼–è¯‘å™¨å¾€å¾€ä¼šç»™ä¸€ä¸ªç©ºç±»éšå«çš„åŠ ä¸€ä¸ªå­—èŠ‚ï¼Œè¿™æ ·ç©ºç±»åœ¨å®ä¾‹åŒ–ååœ¨å†…å­˜å¾—åˆ°äº†ç‹¬ä¸€æ— äºŒçš„åœ°å€ï¼Œæ‰€ä»¥ç©ºç±»æ‰€å çš„å†…å­˜å¤§å°æ˜¯1ä¸ªå­—èŠ‚ã€‚</p>

<hr />
<h2 id="3-å‚è€ƒ">3. å‚è€ƒ</h2>
<p><a href="http://www.cplusplus.com/reference/">c++ å®˜ç½‘</a></p>
:ET